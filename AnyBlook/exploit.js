var socket = null;
var lastDataSent = null;
var path = null;

var gui = document.createElement("div");
gui.style.backgroundColor = "#ffffff";
gui.style.outline = "solid black 3px";
gui.style.height = "30vh";
gui.style.width = "30vw";
gui.style.position = "absolute";
gui.style.display = "block";
gui.style.fontFamily = "Courier";
gui.style.textAlign = "center";
document.body.appendChild(gui);

var blooks = ['Chick', 'Chicken', 'Cow', 'Goat', 'Horse', 'Pig', 'Sheep', 'Duck', 'Dog', 'Cat', 'Rabbit', 'Goldfish', 'Hamster', 'Turtle', 'Kitten', 'Puppy', 'Bear', 'Moose', 'Fox', 'Racoon', 'Squirrel', 'Owl', 'Hedgehog', 'Tiger', 'Orangutan', 'Cockatoo', 'Parrot', 'Anaconda', 'Jaguar', 'Macaw', 'Toucan', 'Panther', 'Capuchin', 'Snowy Owl', 'Polar Bear', 'Arctic Fox', 'Baby Penguin', 'Penguin', 'Arctic Hare', 'Seal', 'Walrus','Witch', 'Wizard', 'Elf', 'Fairy', 'Slime Monster', 'Two of Spades', 'Eat Me', 'Drink Me', 'Alice', 'Queen of Hearts', 'Toast', 'Cereal', 'Yogurt', 'Breakfast Combo', 'Orange Juice', 'Milk', 'Earth', 'Meteor', 'Stars', 'Alien', 'Snow Globe', 'Holiday Gift', 'Hot Chocolate', 'Holiday Wreath', 'Pumpkin', 'Swamp Monster', 'Frankenstein', 'Vampire','Jester', 'Dragon', 'Queen', 'Dormouse', 'White Rabbit', 'Cheshire Cat', 'Waffle', 'Pancakes', 'Planet', 'UFO', 'Gingerbread Man', 'Gingerbread House', 'Zombie', 'Mummy', 'Dink', 'Donk','Unicorn', 'Caterpillar', 'Mad Hatter', 'French Toast', 'Pizza', 'Spaceship', 'Snowman', 'Werewolf','King of Hearts', 'Astronaut', 'Mega Bot', 'Tyrannosaurus Rex', 'Baby Shark', 'Megalodon', 'Santa Claus', 'Ghost', 'Lion'];

var header = document.createElement("h2");
header.innerText = "Choose a blook.";
gui.appendChild(header);

var select = document.createElement("select");
select.style.width = "90%";
select.style.height = "70%";
select.style.textAlign = "center";
select.style.fontSize = "3em";
gui.appendChild(select);

for (let i = 0; i < blooks.length; i++) {
	var option = document.createElement("option");
	option.innerText = blooks[i];
	select.appendChild(option);
}

select.addEventListener("change",()=>{
	if (socket) {
		socket.send(JSON.stringify({"t":"d","d":{"r":10,"a":"p","b":{"p":path,"d":select.value}}}));
	}
});


const nativeSend = window.WebSocket.prototype.send;
window.WebSocket.prototype.send = function(data) {
	nativeSend.call(this, data);
	console.log(data.toString());
	lastDataSent = data;
	path = JSON.parse(data).d.b.p;
	socket = this;
};

document.onkeydown = (e) => {
	if (e.repeat) {
		return
	}
	if (e.key == "j") {
		if (gui.style.display == "block") {
			gui.style.display = "none";
		} else {
			gui.style.display = "block";
		}
	};
};
